<h2>Topic List</h2>

<%= link_to "About", about_path %>
<%= link_to "New Topic", new_topic_path %>

<%= sort_link(@q, :create_at, 'Create At', default_order: :desc) %>
<%= sort_link(@q, :comment_count, 'Comments', default_order: :desc) %>

<table>
  <tr>
    <th>Topic</th>
    <th>Category</th>
    <th>Author</th>
    <th>Comments</th>
    <th>Time</th>
  </tr>
  <% @topics.each do |t| %>
  <tr>
    <td><%= link_to t.title, topic_path(t) %></td>
    <td><%= t.categories.map{ |c| c.name }.join(", ") %></td>
    <td><%= t.user.try(:display_name) %></td>
    <td><%= t.commets_count %></td>
    <td><%= t.create_at.strftime("%B %d at %I:%M %p") %></td>
  </tr>
  <% end %>
</table>
<%= paginate @topics %>